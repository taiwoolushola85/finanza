class App{init(){this.initComponents(),this.initPreloader(),this.initPortletCard(),this.initMultiDropdown(),this.initFormValidation(),this.initCounter(),this.initToggle(),this.initPassword(),this.initDismissible(),this.initSidenav()}initComponents(){"function"==typeof lucide.createIcons&&lucide.createIcons(),document.querySelectorAll('[data-bs-toggle="popover"]').forEach(e=>{new bootstrap.Popover(e)}),document.querySelectorAll('[data-bs-toggle="tooltip"]').forEach(e=>{new bootstrap.Tooltip(e)}),document.querySelectorAll(".offcanvas").forEach(e=>{new bootstrap.Offcanvas(e)}),document.querySelectorAll(".toast").forEach(e=>{new bootstrap.Toast(e)})}initPreloader(){window.addEventListener("load",()=>{var e=document.getElementById("status");let t=document.getElementById("preloader");e&&(e.style.display="none"),t&&setTimeout(()=>t.style.display="none",350)})}initPortletCard(){$('[data-action="card-close"]').on("click",function(e){e.preventDefault();let t=$(this).closest(".card");t.fadeOut(300,function(){t.remove()})}),$('[data-action="card-toggle"]').on("click",function(e){e.preventDefault();var e=$(this).closest(".card"),t=$(this).find("i").eq(0),a=e.find(".card-body"),i=e.find(".card-footer");a.slideToggle(300),i.slideToggle(200),t.toggleClass("ti-chevron-up ti-chevron-down"),e.toggleClass("card-collapse")});var e=document.querySelectorAll('[data-action="card-refresh"]');e&&e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t,e=e.target.closest(".card").querySelector(".card-body");e.style.position="relative";let a=e.querySelector(".card-overlay");a||((a=document.createElement("div")).classList.add("card-overlay"),(t=document.createElement("div")).classList.add("spinner-border","text-primary"),a.appendChild(t),e.appendChild(a)),a.style.display="flex",setTimeout(function(){a.style.display="none"},1500)})}),$('[data-action="code-collapse"]').on("click",function(e){e.preventDefault();var e=$(this).closest(".card"),t=$(this).find("i").eq(0);e.find(".code-body").slideToggle(300),t.toggleClass("ti-chevron-up ti-chevron-down")})}initMultiDropdown(){$(".dropdown-menu a.dropdown-toggle").on("click",function(){var e=$(this).next(".dropdown-menu"),e=$(this).parent().parent().find(".dropdown-menu").not(e);return e.removeClass("show"),e.parent().find(".dropdown-toggle").removeClass("show"),!1})}initFormValidation(){document.querySelectorAll(".needs-validation").forEach(t=>{t.addEventListener("submit",e=>{t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")},!1)})}initCounter(){var e=document.querySelectorAll("[data-target]");let t=new IntersectionObserver((e,r)=>{e.forEach(s=>{if(s.isIntersecting){let e=s.target,t=e.getAttribute("data-target").replace(/,/g,""),a=(t=parseFloat(t),0),i,o=(i=Number.isInteger(t)?Math.floor(t/25):t/25,()=>{a<t?((a+=i)>t&&(a=t),e.innerText=n(a),requestAnimationFrame(o)):e.innerText=n(t)});function n(e){return e%1==0?e.toLocaleString():e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}o(),r.unobserve(e)}})},{threshold:1});e.forEach(e=>t.observe(e))}initToggle(){document.querySelectorAll("[data-toggler]").forEach(e=>{let t=e.querySelector("[data-toggler-on]"),a=e.querySelector("[data-toggler-off]"),i="on"===e.getAttribute("data-toggler"),o=()=>{i?(t?.classList.remove("d-none"),a?.classList.add("d-none")):(t?.classList.add("d-none"),a?.classList.remove("d-none"))};t?.addEventListener("click",()=>{i=!1,o()}),a?.addEventListener("click",()=>{i=!0,o()}),o()})}initPassword(){document.querySelectorAll("[data-password]").forEach(e=>{let t=e.querySelector(".form-password"),a=e.querySelector(".password-eye-on"),i=e.querySelector(".password-eye-off");t&&a&&i&&(i.classList.add("d-none"),a.addEventListener("click",()=>{t.type="text",a.classList.add("d-none"),i.classList.remove("d-none")}),i.addEventListener("click",()=>{t.type="password",i.classList.add("d-none"),a.classList.remove("d-none")}))})}initDismissible(){document.querySelectorAll("[data-dismissible]").forEach(t=>{t.addEventListener("click",()=>{var e=t.getAttribute("data-dismissible"),e=document.querySelector(e);e&&e.remove()})})}initSidenav(){let n=document.querySelector(".side-nav");if(n){n.querySelectorAll("li [data-bs-toggle='collapse']").forEach(e=>{e.addEventListener("click",e=>e.preventDefault())});let o=n.querySelectorAll("li .collapse"),e=(o.forEach(e=>{e.addEventListener("show.bs.collapse",e=>{let t=e.target,a=[],i=t.parentElement;for(;i&&i!==n;)i.classList.contains("collapse")&&a.push(i),i=i.parentElement;o.forEach(e=>{e===t||a.includes(e)||new bootstrap.Collapse(e,{toggle:!1}).hide()})})}),window.location.href.split(/[?#]/)[0]),s=window.location.pathname.split("/").pop();n.querySelectorAll(".side-nav-link[href]").forEach(t=>{var a=t.getAttribute("href");if(a&&(a===s||t.href===e)){n.querySelectorAll("a.active, li.active, .collapse.show").forEach(e=>{e.classList.remove("active","show")}),t.classList.add("active");a=t.closest("li.side-nav-item");a&&a.classList.add("active");let e=t.closest("li");for(;e&&e!==n;){e.classList.add("active");var i,o=e.closest(".collapse");e=o?(o.classList.add("show"),(i=n.querySelector(`a[href="#${o.id}"]`))&&(i.setAttribute("aria-expanded","true"),i=i.closest("li.side-nav-item"))&&i.classList.add("active"),o.closest("li")):e.parentElement}}}),setTimeout(()=>{var e=n.querySelector("li.active .active"),t=document.querySelector(".sidenav-menu .simplebar-content-wrapper");if(e&&t){e=e.offsetTop-300;if(100<e){var r=t;t=e;var l=600;let o=r.scrollTop,s=t-o,n=0;!function e(){var t,a,i;n+=20,r.scrollTop=(t=n,a=o,i=s,(t/=l/2)<1?i/2*t*t+a:-i/2*(--t*(t-2)-1)+a),n<l&&setTimeout(e,20)}()}}},200)}}}class LayoutCustomizer{constructor(){this.html=document.documentElement,this.config={}}init(){this.initConfig(),this.monochromeMode(),this.initSwitchListener(),this.initWindowSize(),this._adjustLayout(),this.setSwitchFromConfig(),this.openCustomizer()}initConfig(){this.defaultConfig=JSON.parse(JSON.stringify(window.defaultConfig)),this.config=JSON.parse(JSON.stringify(window.config)),this.setSwitchFromConfig()}isFirstVisit(){return!localStorage.getItem("__user_has_visited__")&&(localStorage.setItem("__user_has_visited__","true"),!0)}openCustomizer(){var t=document.getElementById("theme-settings-offcanvas");if(t&&this.isFirstVisit()){let e=new bootstrap.Offcanvas(t);setTimeout(()=>{e.show()},1e3)}}monochromeMode(){var e=document.getElementById("monochrome-mode");e&&e.addEventListener("click",()=>{this.config.monochrome=!this.config.monochrome,this.config.monochrome?this.html.classList.add("monochrome"):this.html.classList.remove("monochrome"),this.setSwitchFromConfig()})}changeSkin(e){this.config.skin=e,this.html.setAttribute("data-skin",e),this.setSwitchFromConfig()}changeSidenavColor(e){this.config.sidenav.color=e,this.html.setAttribute("data-sidenav-color",e),this.setSwitchFromConfig()}changeSidenavSize(e,t=!0){this.html.setAttribute("data-sidenav-size",e),t&&(this.config.sidenav.size=e,this.setSwitchFromConfig())}changeLayoutPosition(e){this.config.layout.position=e,this.html.setAttribute("data-layout-position",e),this.setSwitchFromConfig()}changeTheme(e){this.config.theme=e,this.html.setAttribute("data-bs-theme",e),this.setSwitchFromConfig()}changeTopbarColor(e){this.config.topbar.color=e,this.html.setAttribute("data-topbar-color",e),this.setSwitchFromConfig()}changeSidenavUser(e){(this.config.sidenav.user=e)?this.html.setAttribute("data-sidenav-user",e):this.html.removeAttribute("data-sidenav-user"),this.setSwitchFromConfig()}resetTheme(){this.config=JSON.parse(JSON.stringify(window.defaultConfig)),this.changeSkin(this.config.skin),this.changeSidenavColor(this.config.sidenav.color),this.changeSidenavSize(this.config.sidenav.size),this.changeTheme(this.config.theme),this.changeLayoutPosition(this.config.layout.position),this.changeTopbarColor(this.config.topbar.color),this.changeSidenavUser(this.config.sidenav.user),this._adjustLayout()}setSwitchFromConfig(){var e=this.config;sessionStorage.setItem("__SIMPLE_CONFIG__",JSON.stringify(e)),document.querySelectorAll(".right-bar input[type=checkbox]").forEach(e=>e.checked=!1);((e,t)=>{e=document.querySelector(e);e&&(e.checked=t)})('input[name="sidebar-user"]',!0===e.sidenav.user),[["data-skin",e.skin],["data-bs-theme",e.theme],["data-layout-position",e.layout.position],["data-topbar-color",e.topbar.color],["data-sidenav-color",e.sidenav.color],["data-sidenav-size",e.sidenav.size]].forEach(([e,t])=>{e=document.querySelector(`input[name="${e}"][value="${t}"]`);e&&(e.checked=!0)})}initSwitchListener(){var e=(e,t)=>{document.querySelectorAll(e).forEach(e=>e.addEventListener("change",()=>t(e)))},e=(document.querySelectorAll("button[data-skin]").forEach(e=>e.addEventListener("click",()=>this.changeSkin(e.getAttribute("data-skin")))),e('input[name="data-sidenav-color"]',e=>this.changeSidenavColor(e.value)),e('input[name="data-sidenav-size"]',e=>this.changeSidenavSize(e.value)),e('input[name="data-bs-theme"]',e=>this.changeTheme(e.value)),e('input[name="data-layout-position"]',e=>this.changeLayoutPosition(e.value)),e('input[name="data-topbar-color"]',e=>this.changeTopbarColor(e.value)),e('input[name="sidebar-user"]',e=>this.changeSidenavUser(e.checked)),document.getElementById("light-dark-mode")),e=(e&&e.addEventListener("click",()=>{var e="light"===this.config.theme?"dark":"light";this.changeTheme(e)}),document.querySelector("#reset-layout")),e=(e&&e.addEventListener("click",()=>this.resetTheme()),document.querySelector(".button-close-offcanvas"));e&&e.addEventListener("click",()=>{this.html.classList.remove("sidebar-enable"),this.hideBackdrop()}),document.querySelectorAll(".button-collapse-toggle").forEach(e=>{e.addEventListener("click",()=>{var e=this.html.getAttribute("data-sidenav-size");"offcanvas"===e?(this.showBackdrop(),this.html.classList.toggle("sidebar-enable")):this.changeSidenavSize({default:"collapse",collapse:"default"}[e],!0)})})}showBackdrop(){var e,t,a=document.createElement("div");a.id="custom-backdrop",a.className="offcanvas-backdrop fade show",document.body.appendChild(a),document.body.style.overflow="hidden",document.body.style.paddingRight=((e=document.createElement("div")).style.visibility="hidden",e.style.overflow="scroll",e.style.width="100px",e.style.height="100px",document.body.appendChild(e),(t=document.createElement("div")).style.width="100%",e.appendChild(t),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t+"px"),a.addEventListener("click",()=>{this.html.classList.remove("sidebar-enable"),this.hideBackdrop()})}hideBackdrop(){var e=document.getElementById("custom-backdrop");e&&(document.body.removeChild(e),document.body.style.overflow="",document.body.style.paddingRight="")}_adjustLayout(){var e=window.innerWidth,t=this.config.sidenav.size;e<=1199?this.changeSidenavSize("offcanvas",!1):this.changeSidenavSize(t)}initWindowSize(){window.addEventListener("resize",()=>this._adjustLayout())}}class Plugins{init(){this.initFlatPicker(),this.initTouchSpin()}initFlatPicker(){document.querySelectorAll("[data-provider]").forEach(e=>{var t=e.getAttribute("data-provider"),a=e.attributes,i={disableMobile:!0,defaultDate:new Date};"flatpickr"===t?(a["data-date-format"]&&(i.dateFormat=a["data-date-format"].value),a["data-enable-time"]&&(i.enableTime=!0,i.dateFormat+=" H:i"),a["data-altFormat"]&&(i.altInput=!0,i.altFormat=a["data-altFormat"].value),a["data-minDate"]&&(i.minDate=a["data-minDate"].value),a["data-maxDate"]&&(i.maxDate=a["data-maxDate"].value),a["data-default-date"]&&(i.defaultDate=a["data-default-date"].value),a["data-multiple-date"]&&(i.mode="multiple"),a["data-range-date"]&&(i.mode="range"),a["data-inline-date"]&&(i.inline=!0,i.defaultDate=a["data-default-date"].value),a["data-disable-date"]&&(i.disable=a["data-disable-date"].value.split(",")),a["data-week-number"]&&(i.weekNumbers=!0),flatpickr(e,i)):"timepickr"===t&&(i={enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:new Date},a["data-time-hrs"]&&(i.time_24hr=!0),a["data-min-time"]&&(i.minTime=a["data-min-time"].value),a["data-max-time"]&&(i.maxTime=a["data-max-time"].value),a["data-default-time"]&&(i.defaultDate=a["data-default-time"].value),a["data-time-inline"]&&(i.inline=!0,i.defaultDate=a["data-time-inline"].value),flatpickr(e,i))})}initTouchSpin(){document.querySelectorAll("[data-touchspin]").forEach(e=>{var n=e.querySelector("[data-minus]"),r=e.querySelector("[data-plus]");let l=e.querySelector("input");if(l){let t=Number(l.min),a=Number(l.max??0),i=Number.isFinite(t),o=Number.isFinite(a),s=()=>Number.parseInt(l.value)||0;l.hasAttribute("readonly")||(n&&n.addEventListener("click",()=>{var e=s()-1;(!i||e>=t)&&(l.value=e.toString())}),r&&r.addEventListener("click",()=>{var e=s()+1;(!o||e<=a)&&(l.value=e.toString())}))}})}}class I18nManager{constructor({defaultLang:e="en",langPath:t="assets/data/translations/",langImageSelector:a="#selected-language-image",langCodeSelector:i="#selected-language-code",translationKeySelector:o="[data-lang]",translationKeyAttribute:s="data-lang",languageSelector:n="[data-translator-lang]"}={}){this.selectedLanguage=sessionStorage.getItem("__SIMPLE_LANG__")||e,this.langPath=t,this.langImageSelector=a,this.langCodeSelector=i,this.translationKeySelector=o,this.translationKeyAttribute=s,this.languageSelector=n,this.selectedLanguageImage=document.querySelector(this.langImageSelector),this.selectedLanguageCode=document.querySelector(this.langCodeSelector),this.languageButtons=document.querySelectorAll(this.languageSelector)}async init(){await this.applyTranslations(),this.updateSelectedImage(),this.updateSelectedCode(),this.bindLanguageSwitchers()}async loadTranslations(){try{var e=await fetch(""+this.langPath+this.selectedLanguage+".json");if(e.ok)return await e.json();throw new Error(`Failed to load ${this.selectedLanguage}.json`)}catch(e){return console.error("Translation load error:",e),{}}}async applyTranslations(){let i=await this.loadTranslations();document.querySelectorAll(this.translationKeySelector).forEach(e=>{var t=e.getAttribute(this.translationKeyAttribute),a=(a=i,t.split(".").reduce((e,t)=>e?.[t]??null,a));a?e.innerHTML=a:console.warn("Missing translation for key: "+t)})}setLanguage(e){this.selectedLanguage=e,localStorage.setItem("__SIMPLE_LANG__",e),this.applyTranslations(),this.updateSelectedImage(),this.updateSelectedCode()}updateSelectedImage(){var e=document.querySelector(`[data-translator-lang="${this.selectedLanguage}"] [data-translator-image]`);e&&this.selectedLanguageImage&&(this.selectedLanguageImage.src=e.src)}updateSelectedCode(){this.selectedLanguageCode&&(this.selectedLanguageCode.textContent=this.selectedLanguage.toUpperCase())}bindLanguageSwitchers(){this.languageButtons.forEach(t=>{t.addEventListener("click",()=>{var e=t.dataset.translatorLang;e&&e!==this.selectedLanguage&&this.setLanguage(e)})})}}document.addEventListener("DOMContentLoaded",function(e){(new App).init(),(new LayoutCustomizer).init(),(new Plugins).init(),(new I18nManager).init()});let ins=(e,t=1)=>{var a=getComputedStyle(document.documentElement).getPropertyValue("--ins-"+e).trim();return e.includes("-rgb")?`rgba(${a}, ${t})`:a};function debounce(e,t){let a;return function(){clearTimeout(a),a=setTimeout(e,t)}}class CustomChartJs{static instances=[];constructor({selector:e,options:t=()=>({})}){if(e){this.selector=e,this.getOptions="function"==typeof t?t:()=>t,this.element=null,this.chart=null;try{this.render(),CustomChartJs.instances.push(this)}catch(e){console.error("CustomChartJs: Initialization error",e)}}else console.warn("CustomChartJs: 'selector' is required.")}static getDefaultOptions(){var e=getComputedStyle(document.body).fontFamily.trim();return{responsive:!0,maintainAspectRatio:!1,layout:{padding:{top:-10}},scales:{x:{ticks:{font:{family:e},color:ins("secondary-color"),display:!0,drawTicks:!0},grid:{display:!1,drawBorder:!1},border:{display:!1}},y:{ticks:{font:{family:e},color:ins("secondary-color")},grid:{display:!0,drawBorder:!1,color:ins("chart-border-color"),lineWidth:1},border:{display:!1,dash:[5,5]}}},plugins:{legend:{display:!0,position:"top",labels:{font:{family:e},color:ins("secondary-color"),usePointStyle:!0,pointStyle:"circle",boxWidth:8,boxHeight:8,padding:15}},tooltip:{enabled:!0,titleFont:{family:e},bodyFont:{family:e}}}}}render(){try{var e,t,a,i;this.element=this.selector instanceof HTMLElement?this.selector:document.querySelector(this.selector),this.element?(this.chart&&this.chart.destroy(),{type:e,data:t,options:a,plugins:i}=this.getOptions(),this.chart=new Chart(this.element,{type:e||"bar",data:t,options:{...structuredClone(CustomChartJs.getDefaultOptions()),...a||{}},plugins:i||[]}),window.addEventListener("resize",debounce(()=>{this.chart&&this.chart.resize()},200))):console.warn(`CustomChartJs: No element found for selector '${this.selector}'`)}catch(e){console.error(`CustomChartJs: Render error for '${this.selector}'`,e)}}static rerenderAll(){for(var e of CustomChartJs.instances)e.render()}static reSizeAll(){for(var e of CustomChartJs.instances)e.chart&&e.chart.resize()}static destroyAll(){for(var e of CustomChartJs.instances)e.chart&&e.chart.destroy();CustomChartJs.instances=[]}}CustomChartJs.instances=[];let themeObserver=new MutationObserver(()=>{CustomChartJs.rerenderAll()}),menuObserver=(themeObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["data-skin","data-bs-theme"]}),new MutationObserver(()=>{requestAnimationFrame(()=>{CustomChartJs.reSizeAll()})}));menuObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["data-sidenav-size"]});